##### 什么是生命周期

生命周期（Life Cycle）的概念应用很广泛，特别是在政治、经济、环境、技术、社会等诸多领域经常出现，其基本涵义可以通俗地理解为“从摇篮到坟墓”（Cradle-to-Grave）的整个过程在 Vue 中实例从创建到销毁的过程就是生命周期，即指从创建、初始化数据、编译模板、挂载 Dom→ 渲染、更新 → 渲染、卸载等一系列过程我们可以把组件比喻成工厂里面的一条流水线，每个工人（生命周期）站在各自的岗位，当任务流转到工人身边的时候，工人就开始工作。

我们可以以一个人的一天为例。一个人的一天可以分为几个阶段：早晨、白天、黄昏和晚上。

1. 早晨阶段：当人醒来时，他们会起床、洗漱、吃早餐，并准备开始新的一天。这个阶段类似于 Vue 实例的创建阶段，人们准备好了开始一天的活动。

2. 白天阶段：在白天，人们会进行各种活动，如工作、学习、社交等。他们会不断地与他人互动，处理事务，并根据需要做出相应的反应。这个阶段类似于 Vue 实例的挂载和更新阶段，人们在这个阶段不断地与外界进行交互和响应。

3. 晚上阶段：当太阳开始下山时，人们会逐渐放松下来，准备晚上的活动。他们可能会吃晚餐、看电视、阅读或者进行其他休闲活动。这个阶段类似于 Vue 实例的更新阶段，人们在这个阶段根据自己的需要和兴趣进行各种活动。

4. 睡眠阶段：当夜晚来临时，人们会准备睡觉。他们会关掉电灯，躺在床上，进入睡眠状态。这个阶段类似于 Vue 实例的销毁阶段，人们在这个阶段休息并进入下一个新的周期。

##### Vue2 生命周期

1. 初始化阶段: beforeCreate 与 created

beforeCreate： 执行时组件实例还未创建，初始化 vue 实例，进行数据观测，通常用于插件开发中执行一些初始化任务；

created： 组件初始化完毕，完成数据观测，属性与方法的运算，watch、event 事件回调的配置（可以访问到 this ）；

2. 挂载阶段: beforeMount 与 mounted

beforeMount： 未执行渲染、更新，dom 未创建，但是已经创建好虚拟 DOM；

mounted: 初始化结束，dom 已创建，可用于获取访问数据和 dom 元素（可以访问 vm.$el）

3. 更新阶段: beforeUpdate 与 updated

beforeUpdate： 更新前，可用于获取更新前各种状态；

updated: 更新后，所有状态已是最新；

4. 销毁阶段: beforeDestroy 与 destroyed

beforeDestroy： 销毁前，可用于一些定时器、事件、或订阅的取消；

destroyed：组件已销毁，作用同上；

##### Vue3 生命周期

Vue 2 和 Vue 3 之间的基本生命周期阶段（创建、挂载、更新和卸载）保持相似。

- 新增： setup

setup 函数是一个新的组件选项， setup 函数在组件实例被创建之前（beforeCreate）执行，它是组件的入口点。在 setup 函数中，你可以进行一些初始化的操作，包括设置响应式数据、绑定事件处理函数等。需要注意的是， setup 函数是在组件实例创建之前执行的，因此在 setup 函数中无法访问到 this ，可以通过返回值来暴露组件中需要使用的数据和方法。

- 移除： beforeCreate 和 created

在 Vue 3 中， beforeDestroy 和 destroyed 生命周期钩子更名为 beforeUnmount 和 unmounted 。

##### 父子组件生命周期执行顺序

执行顺序如下：

1. 父组件： beforeCreate
2. 父组件： created
3. 父组件： beforeMount
4. 子组件： beforeCreate
5. 子组件： created
6. 子组件： beforeMount
7. 子组件： mounted
8. 父组件： mounted
