**HTTP 队头阻塞**

> HTTP 队头阻塞（HTTP/1.1 Head-of-Line Blocking）是指在 HTTP/1.1 协议中，由于使用了串行的请求-响应模型，当一个请求在传输过程中遇到阻塞时，后续的请求也会被阻塞，无法继续传输和处理。

> HTTP/1.1 中，浏览器与服务器之间的通信是基于 TCP 连接的，每个请求都需要在前一个请求的响应完成后才能发起。当一个请求的响应被阻塞，例如由于网络延迟、带宽限制或服务器处理时间过长，这会导致后续请求也被阻塞，即使这些请求可以在此之前被立即处理。

> 由于 HTTP 队头阻塞的存在，即使页面中的其他资源已经准备就绪，浏览器仍然需要等待前一个请求的响应完成后才能继续处理后续请求，从而延长了页面加载时间和渲染时间。

> 为了解决 HTTP 队头阻塞问题，HTTP/2 协议引入了多路复用（Multiplexing）的机制，允许多个请求同时在一个 TCP 连接上进行传输，从而避免了请求之间的阻塞。这样可以提高页面加载速度和性能。

**http 请求有并发限制**

> 浏览器对 HTTP 请求有并发限制。这是为了避免对服务器造成过大的负载，同时保证用户体验。具体的并发限制数目可以因浏览器而异，但通常情况下，现代浏览器对同一域名下的并发请求数量有限制，一般在 4 到 6 个之间。

> 这意味着在同一时间内，浏览器最多只能同时发送 4 到 6 个请求到同一个域名。如果超过了这个限制，浏览器会将额外的请求排队等待，直到之前的请求完成并释放出空闲的连接。

> 为了充分利用浏览器的并发请求能力，可以使用域名分片（Domain Sharding）的技术，将页面中的资源分散到不同的子域名上，从而增加并发请求的数量。另外，使用 HTTP/2 协议也可以通过多路复用的机制同时发送多个请求，避免了 HTTP/1.1 中的队头阻塞问题。

**http 请求必须按顺序返回结果吗**

> 在 HTTP/1.1 协议中，HTTP 请求必须按顺序返回结果。这意味着服务器会按照请求的顺序依次处理，并将响应按照相同的顺序返回给客户端。如果一个请求的响应还没有返回，后续的请求会被阻塞，直到前一个请求的响应返回或超时。

> 这种按顺序返回结果的机制被称为队头阻塞（Head-of-Line Blocking），它可能导致请求的等待时间增加，从而影响页面加载速度和性能。
> 然而，HTTP/2 协议引入了多路复用（Multiplexing）的机制，允许多个请求同时在一个 TCP 连接上进行传输，从而避免了队头阻塞的问题。在 HTTP/2 中，服务器可以并发处理多个请求，并将响应按照不同的顺序返回给客户端，从而提高了页面加载速度和性能。
> 总结起来，在 HTTP/1.1 中，HTTP 请求必须按顺序返回结果，而在 HTTP/2 中，可以并发处理请求并按不同的顺序返回结果。
